<% @sub_length = [(Time.now + 3.months).at_beginning_of_month.next_month,
                  (Time.now + 6.months).at_beginning_of_month.next_month,
                  (Time.now + 12.months).at_beginning_of_month.next_month,
                  (Time.now + 18.months).at_beginning_of_month.next_month,
                  (Time.now + 24.months).at_beginning_of_month.next_month]
                  %>

<%= fields_for :'subscription_line_item', SolidusSubscriptions::LineItem.new do |ff| %>

  <%= ff.hidden_field :quantity, value: 1 %>
  <%= ff.hidden_field :subscribable_id, value: 1 %>
  <%= ff.hidden_field :interval_length, value: 1 %>
  <%= ff.hidden_field :interval_units, value: 'month' %>
  <%= ff.hidden_field :end_date, value: @sub_length.first %>

  <%= ff.hidden_field :subscribable_id, value: 1 %>
<% end %>

<script>
  document.addEventListener("DOMContentLoaded", function(e) {
    var cartForm = document.querySelector('#cart-form form');
    cartForm.addEventListener('submit', function(e) {
      var quantityInput = e.target.querySelector('[name*="quantity"]');
      var subscriptionQuantityInput = e.target.querySelector('[name*="subscribable_id"]');

      subscriptionQuantityInput.value = quantityInput.value;
      return true;
    });
  });
</script>